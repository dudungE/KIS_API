

<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<div th:fragment="volumeRankTable">
    <style>
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #ddd; padding: 8px; }
        th { background: #f2f2f2; }
        .pagination { margin-top: 20px; text-align: center; }
        .pagination a { padding: 8px 16px; text-decoration: none; border: 1px solid #ddd; }
        .pagination li { display: inline-block; margin: 0 2px; }
        .pagination .active a { background: #007bff; color: white; border-color: #007bff; }
        .pagination .disabled a { color: #ccc; cursor: not-allowed; }
    </style>

    <h2>거래량 순위</h2>
    <table>
        <thead>
        <tr>
            <th>순위</th>
            <th>종목명</th>
            <th>종목코드</th>
            <th>현재가</th>
            <th>전일대비</th>
            <th>전일대비율</th>
            <th>누적거래량</th>
            <th>거래대금</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="item, iterStat : ${volumeRankList}">
            <!-- 1부터 시작하는 순위 -->
<!--            <td th:text="${iterStat.index + 1}"></td>-->
            <td th:text="${iterStat.index + 1 + (currentPage * pageSize)}"></td>
            <!-- 종목명: 상세 페이지 링크 -->
            <td>
                <a th:href="@{'/stock/' + ${item.code}}"
                   th:text="${item.name}"></a>
            </td>
            <!-- 종목코드 -->
            <td th:text="${item.code}"></td>
            <!-- 현재가: 천단위 콤마 -->
            <td th:text="${#numbers.formatInteger(item.price, 1, 'COMMA')}"></td>
            <!-- 전일대비 -->
            <td th:text="${item.change}"></td>
            <!-- 전일대비율 -->
            <td th:text="${item.chgrate}"></td>
            <!-- 누적거래량: 천단위 콤마 -->
            <td th:text="${#numbers.formatInteger(item.acmlVol, 1, 'COMMA')}"></td>
            <!-- 거래대금: 천단위 콤마 -->
            <td th:text="${#numbers.formatInteger(item.tradeAmt, 1, 'COMMA')}"></td>
        </tr>
        </tbody>
    </table>


    <!-- 페이지네이션 바 -->
    <nav th:if="${totalPages > 1}">
        <ul class="pagination">
            <!-- 이전 페이지 -->
            <li th:classappend="${currentPage == 0} ? 'disabled'">
                <a th:href="@{/volume-rank-view2(page=${currentPage - 1}, size=${pageSize})}">‹</a>
            </li>

            <!-- 페이지 번호 -->
            <li th:each="i : ${#numbers.sequence(0, totalPages - 1)}"
                th:classappend="${i == currentPage} ? 'active'">
                <a th:href="@{/volume-rank-view2(page=${i}, size=${pageSize})}"
                   th:text="${i + 1}"></a>
            </li>

            <!-- 다음 페이지 -->
            <li th:classappend="${currentPage == totalPages - 1} ? 'disabled'">
                <a th:href="@{/volume-rank-view2(page=${currentPage + 1}, size=${pageSize})}">›</a>
            </li>
        </ul>
    </nav>
</div>
</html>

